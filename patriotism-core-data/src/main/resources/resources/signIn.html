<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
<body>
    <h1>标准登陆页面</h1>
    <h3>表单登陆</h3>
    <form action="/register/register" method="post">
        <table>
            <tr>
                <td>手机号：</td>
                <td><input type="text" name="telphone" id="telphone"></td>
            </tr>
            <tr>
                <td>验证码：</td>
                <td>
                    <input type="text" name="smsCode">
                </td>
                <td>
                    <input type="button" value="发送验证码" name="sendSms" id="sendSms">
                </td>
            </tr>

            <tr>
                <td>密码：</td>
                <td>
                    <input type="password" name="password">
                </td>
            </tr>
            <tr>
                <td colspan="2"><button type="submit">登陆</button></td>
            </tr>
        </table>
    </form>
</body>

<script type="application/javascript">
    $(document).ready(function () {
        $("#sendSms").click(function () {
            var telphone = $("#telphone").val();
            if (telphone == null || telphone == "") {
                alert("手机号不能为空！");
                return false;
            }
            $.ajax({
                type:"POST",
                contentType:"application/x-www-form-urlencoded",
                url:"http://localhost:8090/register/sendSms",
                data:{
                    telphone: telphone
                },
                xhrFields: {withCredentials:true},
                success:function (data) {
                    if (data.status == "success") {
                        alert("otp已经发送到您的手机上，请注意查收");
                    } else {
                        alert("otp发送失败，原因：" + data.data.errorMsg);
                    }
                },
                fail:function (error) {
                    alert("opt发送失败，原d因：" + data.responseText);
                }
            });
        }) 
        
    })
</script>
</html>